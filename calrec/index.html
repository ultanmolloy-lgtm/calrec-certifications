<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calrec - Type R IO & Surface Badge</title>
    <style>
      :root {
        --bg: #0b1220;
        --fg: #e9eef7;
        --muted: #96a2b4;
        --btn: #0ea5e9;
        --btn-hover: #38bdf8;
        --card: #0e172a;
        --border: #1f2a44;
        --ok: #22c55e;
      }
      * { box-sizing: border-box; }
      body {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        background: var(--bg);
        color: var(--fg);
        margin: 0;
        padding: 2rem;
        display: grid;
        place-items: center;
      }
      .wrap {
        max-width: 780px;
        width: 100%;
      }
      header { text-align: center; margin-bottom: 1.25rem; }
      h1 { margin: 0 0 .25rem 0; font-weight: 700; }
      p.lead { margin: 0; color: var(--muted); }
      .card {
        background: var(--card);
        border: 1px solid var(--border);
        border-radius: 14px;
        padding: 1.25rem;
        text-align: center;
        box-shadow: 0 8px 24px rgba(0,0,0,.35);
      }
      img.badge {
        max-width: 320px;
        width: 100%;
        border-radius: 12px;
        display: block;
        margin: 1rem auto 0;
      }
      .buttons {
        margin-top: 1.25rem;
        display: flex;
        flex-wrap: wrap;
        gap: .5rem;
        justify-content: center;
      }
      a.btn, button.btn {
        appearance: none;
        border: none;
        background: var(--btn);
        color: #001627;
        font-weight: 700;
        padding: .7rem 1rem;
        border-radius: 10px;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: .5rem;
        cursor: pointer;
      }
      a.btn:hover, button.btn:hover { background: var(--btn-hover); }
      a.btn:focus-visible, button.btn:focus-visible {
        outline: 2px solid var(--btn-hover);
        outline-offset: 2px;
      }
      .row { display: flex; gap: .5rem; justify-content: center; margin-top: .5rem; flex-wrap: wrap; }
      .muted { color: var(--muted); margin-top: 1rem; text-align: center; font-size: .95rem; }
      .toast {
        position: fixed; inset-inline: 0; top: 14px;
        display: grid; place-items: center; pointer-events: none;
      }
      .toast > div {
        background: #0a1a2f; border: 1px solid var(--border); color: var(--fg);
        padding: .6rem .9rem; border-radius: 10px; box-shadow: 0 10px 30px rgba(0,0,0,.45);
        transform: translateY(-8px); opacity: 0; transition: .18s ease;
      }
      .toast.show > div { transform: translateY(0); opacity: 1; }
      footer { margin-top: 1.25rem; text-align: center; color: var(--muted); font-size: .95rem; }
      code.url {
        word-break: break-all; white-space: pre-wrap; background: #0a1a2f;
        border: 1px solid var(--border); padding: .5rem .6rem; border-radius: 8px;
        display: inline-block; max-width: 100%;
      }
      .ok { color: var(--ok); font-weight: 700; }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <h1>Calrec — Type R IO & Surface</h1>
        <p class="lead">Issued to <strong>Ultan Molloy</strong></p>
      </header>

      <section class="card">
        <img class="badge" src="badge.png" alt="Calrec Type R IO & Surface badge" />

        <div class="buttons" role="group" aria-label="Badge actions">
          <a class="btn" href="badge.png" download>⬇️ Download Badge</a>
          <a class="btn" href="assertion.json" target="_blank" rel="noopener">📄 View Assertion</a>
          <a class="btn" href="badgeclass.json" target="_blank" rel="noopener">📜 View BadgeClass</a>
          <a id="verify-btn" class="btn" href="#" target="_blank" rel="noopener">✅ Verify (BadgeCheck)</a>
        </div>

        <div class="row">
          <button id="copy-btn" class="btn" type="button">🔗 Copy Assertion URL</button>
          <a id="ims-btn" class="btn" href="#" target="_blank" rel="noopener">🧪 Try IMS Verifier</a>
        </div>

        <p class="muted">
          Verification uses BadgeCheck while IMS is experiencing DNS issues.
          When IMS is back, the IMS link below will also work.
        </p>

        <p class="muted">
          Assertion URL:<br />
          <code id="assertion-url" class="url">https://ultanmolloy-lgtm.github.io/calrec-certifications/calrec/badges/typer/assertion.json</code>
        </p>
      </section>

      <footer>Hosted via GitHub Pages · © Ultan Molloy</footer>
    </div>

    <div id="toast" class="toast" aria-live="polite" aria-atomic="true">
      <div>✅ Copied assertion URL</div>
    </div>

    <script>
      const assertionUrl = "https://ultanmolloy-lgtm.github.io/calrec-certifications/calrec/badges/typer/assertion.json";

      // Primary (fallback) verifier while IMS is down
      const badgeCheckBase = "https://badgecheck.io/?url=";
      document.getElementById("verify-btn").href = badgeCheckBase + encodeURIComponent(assertionUrl);

      // Optional IMS verifier link (will work again when DNS is restored)
      const imsBase = "https://verifier.imsglobal.org/?url=";
      document.getElementById("ims-btn").href = imsBase + encodeURIComponent(assertionUrl);

      // Copy-to-clipboard with small toast
      const copyBtn = document.getElementById("copy-btn");
      const toast = document.getElementById("toast");
      copyBtn.addEventListener("click", async () => {
        try {
          await navigator.clipboard.writeText(assertionUrl);
          toast.classList.add("show");
          setTimeout(() => toast.classList.remove("show"), 1300);
        } catch (e) {
          // Fallback for older browsers
          const sel = window.getSelection();
          const range = document.createRange();
          range.selectNode(document.getElementById("assertion-url"));
          sel.removeAllRanges(); sel.addRange(range);
          document.execCommand("copy");
          sel.removeAllRanges();
          toast.classList.add("show");
          setTimeout(() => toast.classList.remove("show"), 1300);
        }
      });
    </script>
  </body>
</html>
